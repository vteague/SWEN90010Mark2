% alloy.sty
% Alloy mode for the LaTeX listings package.
% This is public domain

\definecolor{background}{rgb}{0.9,0.9,0.9}

\lstdefinelanguage{alloy}{
  keywords={%
      assert, pred, all, no, lone, one, some, check, run,
      but, let, implies, not, iff, in, and, or, set, sig, Int, int,
      if, then, else, exactly, disj, fact, fun, module, abstract,
      extends, open, none, univ, iden, seq, expect, enum},
  sensitive=true,  % case sensitive
  comment=[l]{//},
  morecomment=[l]{--},%
  morecomment=[s]{/*}{*/},%
  morestring=[b]",
%  numbers=none,
%  firstnumber=1,
  tabsize=2,
  numberstyle=\tiny,
%  stepnumber=1,
  basicstyle=\footnotesize\ttfamily,
  commentstyle=\itshape,
  keywordstyle=\bfseries,
  ndkeywordstyle=\bfseries
}

% inline
\def\A{%
    \lstinline[language=alloy,basicstyle=\ttfamily,columns=fixed]}

% paragraph
\lstnewenvironment{alloy}[1][]{%
  \lstset{language=alloy,numbers=none,aboveskip=3mm,
    floatplacement={tbp},captionpos=b,
    backgroundcolor=\color{background}, frame=single,
    xleftmargin=8pt,xrightmargin=8pt,#1}}{}

% paragraph from file
\newcommand{\alloyfile}[2]{
  \lstinputlisting[language=alloy,aboveskip=3mm,numbers=none,
    backgroundcolor=\color{background}, frame=single,
    xleftmargin=8pt,xrightmargin=8pt,columns=fixed,#1]{#2}
}
